
一个vultr各机房测速工具
====================

> 学习rust过程的产物，用到了`tokio`/`reqwest`

背景
----
想购买一个vultr主机用于自己上网的需求，但是不知道选哪个机房好，于是首先想到用`ping`和`curl`两个工具测试丢包率、RTT、和下载速度；

然而测试几次发现，跨洋网络不稳定，可能上午发现纽约机房速度最佳，下午再测就变渣了 -_!

于是寻找连续测速的工具，并最终演变为自己开发。



原理
----
首先想到的是16个机房同时发起下载请求，写出来后发现，可能由于本地带宽不足，各个机房之间的速度会相互影响。

所以改为现在的方式：
1. 轮流每个机房发起一个下载请求；
2. 除去最开始的10s数据（这部分数据波动大）
3. 截取10s下载数据，计算平均值
4. 断开连接
5. 下一个机房，重复步骤1~5

如此长期运行，可以获得1天内的网络速率波动图（TUI界面）
![输出结果实例](https://github.com/goodwong/vultr_speed/raw/master/docs/vultr_output.png)


使用
---
1. Linux(Debian)系统下
2. 打开Terminal窗口，并将窗口宽度设置为不小于210列（否则会显示错乱）
3. 运行 vultr_speed，建议持续1天，以便观察各时间段网络速率变化情况



todo：（欢迎参与）
---------------
1. 输出速率曲线到图片格式（TUI变现力不足）
2. 可以自定义测试节点（通过读取nodes.txt）
3. 加入丢包率的连续测试（ICMP协议）


